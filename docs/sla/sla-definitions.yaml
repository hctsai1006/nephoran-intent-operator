# Nephoran Intent Operator SLA Definitions
# Version: 1.0.0
# Last Updated: 2025-01-07

metadata:
  name: nephoran-intent-operator-sla
  version: "1.0.0"
  owner: platform-engineering
  review_cycle: quarterly
  enforcement_date: "2025-01-01"

# Core Platform SLAs
platform_slas:
  availability:
    target: 99.9
    measurement_window: 30d
    calculation_method: "uptime_minutes / total_minutes * 100"
    exclusions:
      - planned_maintenance
      - force_majeure
    degraded_threshold: 99.5
    critical_threshold: 99.0
    
  intent_processing:
    p50_target_ms: 5000
    p95_target_ms: 30000
    p99_target_ms: 45000
    measurement_points:
      - intent_received
      - processing_complete
    excluded_operations:
      - bulk_deployments
      - disaster_recovery
    
  error_rate:
    target_percentage: 0.5
    measurement_window: 1h
    calculation: "failed_requests / total_requests * 100"
    error_categories:
      - client_errors_excluded: true
      - rate_limit_errors_excluded: true
      - validation_errors_excluded: false
      
  resource_optimization:
    cost_savings_target: 20
    measurement_baseline: "previous_quarter_average"
    metrics:
      - cpu_utilization_improvement
      - memory_efficiency_gain
      - network_bandwidth_optimization
      - storage_reduction

# Telecommunications-Specific SLAs
telecom_slas:
  network_function_deployment:
    amf_deployment_time_seconds: 180
    smf_deployment_time_seconds: 150
    upf_deployment_time_seconds: 120
    nrf_deployment_time_seconds: 90
    measurement: "from_intent_to_ready_state"
    
  oran_compliance:
    a1_policy_latency_ms: 100
    o1_configuration_time_seconds: 30
    o2_provisioning_time_minutes: 5
    e2_control_latency_ms: 10
    
  ran_performance:
    handover_success_rate: 99.5
    call_drop_rate_max: 0.5
    connection_setup_time_ms: 100
    throughput_degradation_max: 5
    
  network_slicing:
    slice_creation_time_seconds: 60
    slice_modification_time_seconds: 30
    slice_isolation_guarantee: 100
    qos_compliance_rate: 99.9
    
# O-RAN Specific KPIs
oran_kpis:
  ric_performance:
    xapp_deployment_time_seconds: 45
    policy_enforcement_latency_ms: 50
    ric_availability: 99.95
    event_processing_rate_per_second: 10000
    
  intelligent_optimization:
    ml_inference_latency_ms: 200
    optimization_cycle_time_minutes: 15
    prediction_accuracy_percentage: 85
    resource_utilization_improvement: 25
    
  multi_vendor_interoperability:
    interface_compatibility_rate: 100
    message_translation_latency_ms: 10
    protocol_compliance_rate: 100
    vendor_integration_time_days: 5

# LLM and RAG Performance SLAs
ai_ml_slas:
  llm_processing:
    token_generation_rate_per_second: 50
    context_window_utilization_max: 80
    model_availability: 99.5
    fallback_activation_time_ms: 500
    
  rag_performance:
    retrieval_latency_p95_ms: 200
    retrieval_accuracy_mrr: 85
    cache_hit_rate_min: 75
    embedding_generation_time_ms: 100
    
  knowledge_base:
    update_propagation_time_minutes: 5
    query_success_rate: 99
    document_processing_rate_per_minute: 100
    index_availability: 99.9

# Operational SLAs
operational_slas:
  monitoring:
    metric_collection_interval_seconds: 15
    alert_firing_latency_seconds: 30
    log_ingestion_latency_seconds: 5
    trace_sampling_rate_percentage: 1
    
  disaster_recovery:
    rto_minutes: 15
    rpo_minutes: 5
    backup_success_rate: 100
    recovery_validation_time_minutes: 30
    
  security:
    vulnerability_patch_time_hours: 48
    security_scan_frequency_hours: 24
    incident_response_time_minutes: 15
    audit_log_retention_days: 90
    
  scaling:
    horizontal_scale_time_seconds: 60
    vertical_scale_time_minutes: 5
    autoscale_reaction_time_seconds: 30
    scale_down_cooldown_minutes: 10

# Service Level Indicators (SLIs)
service_level_indicators:
  - name: intent_success_rate
    query: "sum(rate(intent_processing_success_total[5m])) / sum(rate(intent_processing_total[5m]))"
    unit: ratio
    
  - name: api_latency_p95
    query: "histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))"
    unit: seconds
    
  - name: system_availability
    query: "avg_over_time(up{job='nephoran-operator'}[5m])"
    unit: ratio
    
  - name: error_rate
    query: "sum(rate(http_requests_total{status=~'5..'}[5m])) / sum(rate(http_requests_total[5m]))"
    unit: ratio
    
  - name: resource_efficiency
    query: "(1 - (sum(rate(container_cpu_usage_seconds_total[5m])) / sum(kube_pod_container_resource_requests{resource='cpu'}))) * 100"
    unit: percentage

# Composite SLA Scores
composite_scores:
  overall_platform_health:
    weights:
      availability: 0.3
      performance: 0.25
      error_rate: 0.25
      resource_optimization: 0.2
    threshold_healthy: 95
    threshold_degraded: 90
    threshold_critical: 85
    
  telecom_service_quality:
    weights:
      network_function_readiness: 0.3
      oran_compliance: 0.3
      ran_performance: 0.2
      network_slicing: 0.2
    threshold_healthy: 98
    threshold_degraded: 95
    threshold_critical: 90

# Reporting Configuration
reporting:
  frequency:
    real_time_dashboard: continuous
    daily_summary: "0 8 * * *"
    weekly_report: "0 9 * * 1"
    monthly_review: "0 10 1 * *"
    quarterly_assessment: "0 10 1 */3 *"
    
  stakeholders:
    - name: operations_team
      notifications:
        - critical_violations
        - degradation_warnings
      channels:
        - email
        - slack
        - pagerduty
        
    - name: management
      notifications:
        - monthly_summary
        - quarterly_trends
      channels:
        - email
        - dashboard
        
    - name: customers
      notifications:
        - service_disruptions
        - maintenance_windows
      channels:
        - status_page
        - email

# Escalation Matrix
escalation:
  levels:
    - level: 1
      trigger: single_sla_degraded
      response_time_minutes: 30
      team: on_call_engineer
      
    - level: 2
      trigger: single_sla_critical
      response_time_minutes: 15
      team: incident_response
      
    - level: 3
      trigger: multiple_sla_violations
      response_time_minutes: 5
      team: crisis_management
      
    - level: 4
      trigger: platform_unavailable
      response_time_minutes: 1
      team: executive_escalation

# Maintenance Windows
maintenance:
  planned_windows:
    - name: weekly_maintenance
      schedule: "0 2-4 * * 0"  # Sunday 2-4 AM
      sla_enforcement: relaxed
      allowed_operations:
        - minor_updates
        - configuration_changes
        
    - name: monthly_maintenance
      schedule: "0 1-5 1 * *"  # First of month 1-5 AM
      sla_enforcement: suspended
      allowed_operations:
        - major_upgrades
        - infrastructure_changes
        - disaster_recovery_testing

# Remediation Actions
remediation:
  automated_actions:
    high_latency:
      - increase_replicas
      - clear_caches
      - restart_pods
      
    high_error_rate:
      - enable_circuit_breaker
      - increase_timeout
      - fallback_to_cache
      
    resource_exhaustion:
      - trigger_autoscaling
      - evict_low_priority_pods
      - request_quota_increase
      
  manual_procedures:
    persistent_degradation:
      - review_recent_changes
      - analyze_performance_profiles
      - conduct_root_cause_analysis
      
    sla_breach:
      - notify_stakeholders
      - implement_hotfix
      - schedule_postmortem